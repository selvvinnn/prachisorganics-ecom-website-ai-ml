{% extends 'store/base.html' %}
{% load currency %}
{% load static %}
{% block title %}Prachi's Organics · Home{% endblock %}
{% block content %}

  <section class="relative h-[56vh] md:h-[70vh] overflow-hidden">
    <div class="absolute inset-0">
      <div id="hero-slides" class="h-full w-full relative">
        <div class="hero-slide absolute inset-0 opacity-100 transition-opacity duration-700 bg-cover bg-center" style="background-image:url('https://images.pexels.com/photos/3373721/pexels-photo-3373721.jpeg');">
          <div class="container mx-auto px-4 h-full flex items-center">
            <div class="bg-white/80 p-6 rounded max-w-lg">
              <h2 class="font-serif text-3xl md:text-4xl mb-3">Nurture Your Natural Glow</h2>
              <p class="text-gray-700 mb-4">Handmade organic essentials for hair, skin and body.</p>
              <div class="flex gap-3"> 
                <a href="/products/?category=skin-care" class="bg-brandGreen text-white px-5 py-2 rounded">Shop Skin</a>
                <a href="/products/" class="bg-brandBrown text-white px-5 py-2 rounded">Explore All</a>
              </div>
            </div>
          </div>
        </div>
        <div class="hero-slide absolute inset-0 opacity-0 transition-opacity duration-700 bg-cover bg-center" style="background-image:url('https://images.pexels.com/photos/973401/pexels-photo-973401.jpeg');">
          <div class="container mx-auto px-4 h-full flex items-center">
            <div class="bg-white/80 p-6 rounded max-w-lg">
              <h2 class="font-serif text-3xl md:text-4xl mb-3">Healthy Hair, Naturally</h2>
              <p class="text-gray-700 mb-4">Nourishing blends for strong, shiny hair.</p>
              <div class="flex gap-3">
                <a href="/products/?category=hair-care" class="bg-brandGreen text-white px-5 py-2 rounded">Shop Hair</a>
                <a href="/combos/" class="bg-brandBrown text-white px-5 py-2 rounded">View Combos</a>
              </div>
            </div>
          </div>
        </div>
        <div class="hero-slide absolute inset-0 opacity-0 transition-opacity duration-700 bg-cover bg-center" style="background-image:url('https://images.pexels.com/photos/6690884/pexels-photo-6690884.jpeg');">
          <div class="container mx-auto px-4 h-full flex items-center">
            <div class="bg-white/80 p-6 rounded max-w-lg">
              <h2 class="font-serif text-3xl md:text-4xl mb-3">Body Care, Clean & Kind</h2>
              <p class="text-gray-700 mb-4">Gentle formulas crafted from nature.</p>
              <div class="flex gap-3">
                <a href="/products/?category=body-care" class="bg-brandGreen text-white px-5 py-2 rounded">Shop Body</a>
                <a href="/products/" class="bg-brandBrown text-white px-5 py-2 rounded">Best sellers</a>
              </div>
            </div>
          </div>
        </div>

        <div class="absolute bottom-4 left-0 right-0 flex items-center justify-center gap-3 z-10">

          <div class="flex gap-2">
            <button class="hero-dot w-2.5 h-2.5 rounded-full bg-white/60 border border-white opacity-30"></button>
            <button class="hero-dot w-2.5 h-2.5 rounded-full bg-white/30 border border-white opacity-30"></button>
            <button class="hero-dot w-2.5 h-2.5 rounded-full bg-white/30 border border-white opacity-30"></button>
          </div>

        </div>
      </div>
    </div>
    <script>
      (function(){
        const slides = document.querySelectorAll('.hero-slide');
        const dots = document.querySelectorAll('.hero-dot');
        const prev = document.getElementById('hero-prev');
        const next = document.getElementById('hero-next');
        let i = 0; let timer;
        function show(idx){
          slides.forEach((s, si)=>{ s.style.opacity = si === idx ? '1' : '0'; s.style.zIndex = si === idx ? '1' : '0'; });
          dots.forEach((d, di)=>{ d.style.backgroundColor = di === idx ? 'rgba(255,255,255,0.9)' : 'rgba(255,255,255,0.3)'; });
          i = idx;
        }
        function nextSlide(){ show((i+1)%slides.length); }
        function prevSlide(){ show((i-1+slides.length)%slides.length); }
        function auto(){ clearInterval(timer); timer = setInterval(nextSlide, 5000); }
        dots.forEach((d, di)=> d.addEventListener('click', ()=>{ show(di); auto(); }));
        if(prev) prev.addEventListener('click', ()=>{ prevSlide(); auto(); });
        if(next) next.addEventListener('click', ()=>{ nextSlide(); auto(); });
        show(0); auto();
      })();
    </script>
  </section>

  <section class="container mx-auto px-4 mt-6">
  <div class="bg-white rounded-2xl border p-5 text-lg flex items-center gap-5 overflow-x-auto whitespace-nowrap shadow-sm">
    <span class=" font-serif text-gray-500 font-medium">Trending:</span>
    <a class="px-5 py-2 rounded-full border hover:border-brandGreen transition-colors duration-200 rounded-full hover:bg-brandGreen hover:text-white transition" href="/products/hair-shampoo/">
      Aloe Vera & Rosemary Hair Shampoo
    </a>
    <a class="px-5 py-2 rounded-full border hover:border-brandGreen transition-colors duration-200 rounded-full hover:bg-brandGreen hover:text-white transition" href="/products/?category=skin-care">
      Skin Care
    </a>
    <a class="px-5 py-2 rounded-full border hover:border-brandGreen transition-colors duration-200 rounded-full hover:bg-brandGreen hover:text-white transition" href="/products/?category=body-care">
      Body Care
    </a>
  </div> 
</section>

  <section class="container mx-auto px-4 md:px-12 lg:px-24 py-12 text-center">
    <h2 class="font-serif text-3xl mb-8 bg-center">Shop by Category</h2>
    <div class="grid md:grid-cols-3 gap-10 sm:grid-cols-3 align-center">
      {% for category in categories %}
        <a href="/products/?category={{ category.slug }}" class="group bg-white rounded shadow overflow-hidden">
          <div class="relative h-80 bg-brandBeige overflow-hidden">
            {% if category.image %}
              <img src="{{ category.image.url }}" alt="{{ category.name }}" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-500 opacity-100 group-hover:opacity-0" onerror="this.style.display='none';"/>
            {% endif %}
            {% if category.hover_image %}
              <img src="{{ category.hover_image.url }}" alt="{{ category.name }} hover" class="absolute inset-0 w-full h-full object-cover transition-opacity duration-500 opacity-0 group-hover:opacity-100" onerror="this.style.display='none';"/>
            {% endif %}
            {% if not category.image and not category.hover_image %}
              <div class="h-full w-full flex items-center justify-center text-gray-500">{{ category.name }}</div>
            {% endif %}
          </div>
          <div class="p-4 flex items-center justify-between">
            <div class="font-semibold">{{ category.name }}</div>
            <div class="text-brandGreen">→</div>
          </div>
        </a>
      {% empty %}
        <div class="text-gray-500">No categories yet.</div>
      {% endfor %}
    </div>
  </section>

   <section class="container mx-auto px-4 py-12 text-center">
    <h2 class="font-serif text-3xl mb-8 bg-center">Featured Products</h2>
     <div class="grid md:grid-cols-3 lg:grid-cols-4 gap-6 lg:gap-9 align-center">
      {% for product in featured_products %}
        <a href="/products/{{ product.slug }}/" class="group bg-white rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition overflow-hidden">
          <div class="aspect-[4/4] bg-brandBeige relative overflow-hidden">
            {% if product.image %}
              <img loading="lazy" class="absolute inset-0 w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" src="{{ product.image.url }}" alt="{{ product.name }}" onerror="this.style.display='none'; this.parentElement.innerHTML='<div class=\'absolute inset-0 flex items-center justify-center text-gray-400\'>No Image</div>';"/>
            {% else %}
              <div class="absolute inset-0 flex items-center justify-center text-gray-500">No Image</div>
            {% endif %}
          </div>
          <div class="p-4">
            <div class="font-semibold line-clamp-1">{{ product.name }}</div>
            <div class="mt-1 flex items-center gap-2">
              <div class="text-brandGreen font-semibold">
                {% if product.sale_price %}
                  {{ product.sale_price|inr }}
                {% else %}
                  {{ product.price|inr }}
                {% endif %}
              </div>
              {% if product.sale_price %}
                <div class="text-gray-400 line-through text-sm">{{ product.price|inr }}</div>
              {% endif %}
            </div>
          </div>
        </a>
      {% empty %}
        <div class="text-gray-500">No products yet.</div>
      {% endfor %}
    </div>
    <div class="mt-6 text-center">
      <a href="/products/" class="inline-block px-5 py-2 border border-brandGreen text-brandGreen rounded-full hover:bg-brandGreen hover:text-white transition">View More</a>
    </div>
  </section>

  <section class="container mx-auto px-4 py-12 text-center">
    <h2 class="font-serif text-3xl mb-8 bg-center">Combo Deals</h2>
    <div class="grid md:grid-cols-4 gap-6">
      {% for combo in combos %}
        <a href="{% url 'store:combo_detail' combo.slug %}" class="group bg-white rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition overflow-hidden">
          <div class="aspect-[4/3] bg-brandBeige relative overflow-hidden">
            {% if combo.image %}
              <img src="{{ combo.image.url }}" alt="{{ combo.name }}" class="absolute inset-0 w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" onerror="this.style.display='none'; this.parentElement.innerHTML='<div class=\'absolute inset-0 flex items-center justify-center text-gray-400\'>No Image</div>';"/>
            {% else %}
              <div class="absolute inset-0 flex items-center justify-center text-gray-500">No Image</div>
            {% endif %}
          </div>
          <div class="p-4">
            <div class="font-semibold mb-1 line-clamp-1">{{ combo.name }}</div>
            <div class="text-sm text-gray-600 line-clamp-2">{{ combo.description|truncatechars:90 }}</div>
            <div class="mt-2 font-semibold text-brandGreen">{{ combo.discounted_price|inr }} <span class="text-gray-400 line-through text-xs">{{ combo.original_price|inr }}</span></div>
          </div>
        </a>
      {% empty %}
        <div class="text-gray-500">No combos yet.</div>
      {% endfor %}
    </div>
    <div class="mt-8">
      <a href="/combos/" class="inline-block px-4 py-2 border border-brandGreen text-brandGreen rounded rounded-full hover:bg-brandGreen hover:text-white transition">View All Combos</a>
    </div>
  </section>

  <section class="container mx-auto px-4 py-12 text-center">
    <h2 class="font-serif text-3xl mb-6 bg-center">Prachi's Organics Four Step Routine</h2>
    <div class="grid md:grid-cols-4 gap-6">
      <div class="bg-white rounded shadow overflow-hidden">
        <div class="relative aspect-[3/4] bg-brandBeige">
          <img src="https://res.cloudinary.com/dm4pmi9ae/image/upload/v1/media/routine/cleanse.jpg" alt="Cleanse" class="absolute inset-0 w-full h-full object-cover" loading="lazy" onerror="this.style.display='none'; this.parentElement.innerHTML='<div class=\'w-full h-full flex items-center justify-center text-gray-400\'>Image</div>';">
        </div>
        <div class="p-4">
          <div class="text-lg font-serif font-semibold">1. Cleanse</div>
          <p class="text-sm text-gray-600">Gently remove impurities to prep your skin.</p>
        </div>
      </div>
      <div class="bg-white rounded shadow overflow-hidden">
        <div class="relative aspect-[3/4] bg-brandBeige">
          <img src="https://res.cloudinary.com/dm4pmi9ae/image/upload/v1/media/routine/tone.jpg" alt="Tone" class="absolute inset-0 w-full h-full object-cover" loading="lazy" onerror="this.style.display='none'; this.parentElement.innerHTML='<div class=\'w-full h-full flex items-center justify-center text-gray-400\'>Image</div>';">
        </div>
        <div class="p-4">
          <div class="text-lg font-serif font-semibold">2. Tone</div>
          <p class="text-sm text-gray-600">Balance and hydrate for a fresh feel.</p>
        </div>
      </div>
      <div class="bg-white rounded shadow overflow-hidden">
        <div class="relative aspect-[3/4] bg-brandBeige">
          <img src="https://res.cloudinary.com/dm4pmi9ae/image/upload/v1/media/routine/treat.jpg" alt="Treat" class="absolute inset-0 w-full h-full object-cover" loading="lazy" onerror="this.style.display='none'; this.parentElement.innerHTML='<div class=\'w-full h-full flex items-center justify-center text-gray-400\'>Image</div>';">
        </div>
        <div class="p-4">
          <div class="text-lg font-serif font-semibold">3. Treat</div>
          <p class="text-sm text-gray-600">Target specific concerns with serums.</p>
        </div>
      </div>
      <div class="bg-white rounded shadow overflow-hidden">
        <div class="relative aspect-[3/4] bg-brandBeige">
          <img src="https://res.cloudinary.com/dm4pmi9ae/image/upload/v1/media/routine/moisturize.jpg" alt="Moisturize" class="absolute inset-0 w-full h-full object-cover" loading="lazy" onerror="this.style.display='none'; this.parentElement.innerHTML='<div class=\'w-full h-full flex items-center justify-center text-gray-400\'>Image</div>';">
        </div>
        <div class="p-4">
          <div class="text-lg font-serif font-semibold">4. Moisturize</div>
          <p class="text-sm text-gray-600">Seal in hydration for lasting glow.</p>
        </div>
      </div>
    </div>
    </div>
  </section>

  <section class="container mx-auto px-3 py-12 text-center">
  <h2 class="font-serif text-3xl mb-6 bg-center">Our Pillars</h2>
  <div class="grid md:grid-cols-4 gap-5 text-center ">

    <div class="p-4 ">
      <div class="mb-4">
        <img src="https://res.cloudinary.com/dm4pmi9ae/image/upload/v1/media/icons/organic.png" alt="100% Organic" class="mx-auto w-40 h-40" onerror="this.style.display='none';">
      </div>
      100% Organic
      <p style="font-size: 12px;">Made from Natual Ingredients</p>
    </div>

    <div class="p-4 ">
      <div class="mb-4">
        <img src="https://res.cloudinary.com/dm4pmi9ae/image/upload/v1/media/icons/creulty.png" alt="Cruelty-Free" class="mx-auto w-40 h-40" onerror="this.style.display='none';">
      </div>
      Cruelty-Free
      <p style="font-size: 12px;">Made from Natual Ingredients</p>
    </div>

    <div class=" p-4">
      <div class="mb-4">
        <img src="https://res.cloudinary.com/dm4pmi9ae/image/upload/v1/media/icons/handmade.png" alt="Handmade" class="mx-auto w-40 h-40" onerror="this.style.display='none';">
      </div>
      Handmade
      <p style="font-size: 12px;">Made from Natual Ingredients</p>
    </div>

    <div class=" p-4">
      <div class="mb-4">
        <img src="https://res.cloudinary.com/dm4pmi9ae/image/upload/v1/media/icons/economy_magic-removebg-preview.png" alt="Eco Packaging" class="mx-auto w-40 h-40" onerror="this.style.display='none';">
      </div>
      Eco Packaging
      <p style="font-size: 12px;">Made from Natual Ingredients</p>
    </div>

  </div>
</section>


  <section class="container mx-auto px-4 py-12 text-center">
    <h2 class="font-serif text-3xl mb-6 bg-center">Customer Reviews</h2>
    <div class="relative overflow-hidden rounded-lg">
      {% if recent_reviews %}
      <div class="pointer-events-none absolute left-0 top-0 h-full w-16 bg-gradient-to-r from-brandBeige to-transparent"></div>
      <div class="pointer-events-none absolute right-0 top-0 h-full w-16 bg-gradient-to-l from-brandBeige to-transparent"></div>
      <div class="flex gap-6 w-[200%] pr-4 pl-4 will-change-transform animate-[reviews-scroll_60s_linear_infinite]">
        {% for review in recent_reviews %}
          <div class="{% if review.photo %}min-w-[360px]{% else %}min-w-[320px]{% endif %} bg-white/95 backdrop-blur rounded-xl p-6 border border-gray-100 shadow-sm">
            <div class="font-semibold mb-1">{{ review.product.name }}</div>
            <div class="text-yellow-500">{% for i in '12345' %}{% if forloop.counter <= review.rating %}★{% else %}☆{% endif %}{% endfor %}</div>
            <p class="text-sm text-gray-700 mt-2 {% if not review.photo %}min-h-12{% endif %}">“{{ review.comment|default:'Great product!' }}”</p>
            {% if review.photo %}
              <div class="mt-2">
                <img src="{{ review.photo.url }}" alt="Review photo" loading="lazy" class="w-full max-w-full max-h-56 object-contain rounded border"/>
              </div>
            {% endif %}
            <div class="text-xs text-gray-400 mt-2">by {{ review.user.username }} · {{ review.created_at|date:'M d, Y' }}</div>
          </div>
        {% endfor %}
        {% for review in recent_reviews %}
          <div class="{% if review.photo %}min-w-[360px]{% else %}min-w-[320px]{% endif %} bg-white/95 backdrop-blur rounded-xl p-6 border border-gray-100 shadow-sm">
            <div class="font-semibold mb-1">{{ review.product.name }}</div>
            <div class="text-yellow-500">{% for i in '12345' %}{% if forloop.counter <= review.rating %}★{% else %}☆{% endif %}{% endfor %}</div>
            <p class="text-sm text-gray-700 mt-2 {% if not review.photo %}min-h-12{% endif %}">“{{ review.comment|default:'Great product!' }}”</p>
            {% if review.photo %}
              <div class="mt-2">
                <img src="{{ review.photo.url }}" alt="Review photo" loading="lazy" class="w-full max-w-full max-h-56 object-contain rounded border"/>
              </div>
            {% endif %}
            <div class="text-xs text-gray-400 mt-2">by {{ review.user.username }} · {{ review.created_at|date:'M d, Y' }}</div>
          </div>
        {% endfor %}
      </div>
      {% else %}
        <div class="grid md:grid-cols-3 gap-6">
          <div class="bg-white/95 backdrop-blur rounded-xl p-6 border border-gray-100 shadow-sm">
            <div class="font-semibold mb-1">Prachi's Favorite</div>
            <div class="text-yellow-500">★★★★★</div>
            <p class="text-sm text-gray-700 mt-2">“Fantastic results! My skin feels so soft.”</p>
            <div class="text-xs text-gray-400 mt-2">by Happy Customer</div>
          </div>
          <div class="bg-white/95 backdrop-blur rounded-xl p-6 border border-gray-100 shadow-sm">
            <div class="font-semibold mb-1">Top Seller</div>
            <div class="text-yellow-500">★★★★★</div>
            <p class="text-sm text-gray-700 mt-2">“Love the texture and natural fragrance.”</p>
            <div class="text-xs text-gray-400 mt-2">by Verified Buyer</div>
          </div>
          <div class="bg-white/95 backdrop-blur rounded-xl p-6 border border-gray-100 shadow-sm">
            <div class="font-semibold mb-1">Most Loved</div>
            <div class="text-yellow-500">★★★★★</div>
            <p class="text-sm text-gray-700 mt-2">“Visible difference in just a week!”</p>
            <div class="text-xs text-gray-400 mt-2">by Loyal Customer</div>
          </div>
        </div>
      {% endif %}
      <style>
        @keyframes reviews-scroll { 0%{ transform: translateX(0);} 100%{ transform: translateX(-50%);} }
      </style>
    </div>
  </section>
{% endblock %}


